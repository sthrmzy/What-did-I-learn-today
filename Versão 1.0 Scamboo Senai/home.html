<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Scamboo</title>
        <link href="inicial.css" rel="stylesheet"/>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@700&display=swap" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@700&family=Roboto:wght@900&display=swap" rel="stylesheet">
        


        


<header>
    <img  class="logo01"src="https://i.ibb.co/Ks6Y753/Capturar.png"/>
 
    <form id="searchForm" class="busca" action="/search" method="get">
        <input type="text" name="query" placeholder="Digite sua busca">
      </form>
    
    <div class="headersaf">
    <a class="caixa" id="btnNovoPost">Anuncie</a>

    <a class="perfil" href="perfil.html">Perfil</a>

    <a class="configurações" href="config.html">Configurações</a>
    </div>
      

</header>

<body>



    <div class="categorias">
        
        <div class="categoria" data-categoria="todasascategorias">Tudo</div>
        <div class="categoria" data-categoria="eletronicos">Eletrônicos</div>
        <div class="categoria" data-categoria="roupas">Roupas</div>
        <div class="categoria" data-categoria="acessorios">Acessórios</div>
        <div class="categoria" data-categoria="serviços">Serviços</div>
        <div class="categoria" data-categoria="esporte">Esporte</div>
        <div class="categoria" data-categoria="casa">Casa</div>
        
      </div>



      <div id="postsContainer"></div>
      
</body>

<div id="modalNovoPost" class="modal">
  <div class="modal-content">
    <h2 class="titulo">Novo Post</h2>
    <form id="formNovoPost" >
      <div class="formNovoPost">

        <div class="formulario">
      <label for="assunto">Assunto:</label>
      <input type="text" id="assunto" name="assunto" class= "assunto" required>
      
      <p for="texto">Texto:</p>
      <textarea id="texto" name="texto" class= "textoo"  required></textarea>
      </div>

    </div>
    </form>

    <p class="imagem">Imagem:</p>
    <div class="socorro">
    <input type="file" id="imagem" name="imagem" class="imagem">
    </div>
    <button type="submit" class="enviar">Enviar</button>
  </div>
</div>


<script>
  // Abrir Modal ao clicar no botão "Novo Post"
document.getElementById("btnNovoPost").addEventListener("click", function() {
  document.getElementById("modalNovoPost").style.display = "block";
});

// Fechar Modal ao clicar fora dele
window.addEventListener("click", function(event) {
  if (event.target == document.getElementById("modalNovoPost")) {
    document.getElementById("modalNovoPost").style.display = "none";
  }
});

// Lidar com o envio do formulário de Novo Post
document.getElementById("formNovoPost").addEventListener("submit", function(event) {
  event.preventDefault(); // Impedir o envio padrão do formulário

  // Obter os valores dos campos do formulário
  var assunto = document.getElementById("assunto").value;
  var texto = document.getElementById("texto").value;
  var imagem = document.getElementById("imagem").value; // Aqui você precisará de um código adicional para lidar com o upload da imagem

   // Enviar os dados para o arquivo "post.php"
   fetch("post.php", {
          method: "POST",
          body: new FormData(document.getElementById("formNovoPost"))
        })
          .then(response => response.text())
          .then(result => {
            console.log(result); // Mensagem de sucesso ou erro do PHP
            // Atualize a página ou faça outras ações após o envio bem-sucedido
          })
          .catch(error => {
            console.error("Erro ao enviar os dados do formulário:", error);
          });

  var postHTML = `
    <div class="post">
      <h3>${assunto}</h3>
      <p>${texto}</p>
      <img src="${imagem}" alt="Imagem do Post">
    </div>
  `;
  document.getElementById("postsContainer").innerHTML += postHTML;

  // Fechar o modal
  document.getElementById("modalNovoPost").style.display = "none";

  // Limpar os campos do formulário
  document.getElementById("assunto").value = "";
  document.getElementById("texto").value = "";
  document.getElementById("imagem").value = "";
});


</script>

<div class="postagens">

  <div class="posts">
    <p class="usuario" id="usuarioHeader">João Silva</p>
  <h2 class="proposta">Troco bota por algo do meu interesse</h2>
  <img class="imagem" src="https://i.ibb.co/Tq9gMdX/onde-comprar-bota-montaria-para-neve.webp"/>
  <p class="descricao">Descrição: 
    Bota da renner, com 59cm de altura feita de 
    couro legítimo comprada em 1987.</p>
  <button class="botao-chat">Chat</button>
  </div>

  <div class="posts">
    <p class="usuario" id="usuarioHeader">Lisa Ninaeri</p>
  <h2 class="proposta">Troco aulas de canto por design para meu estúdio.</h2>
  <img class="imagem" src="https://i.ibb.co/26mChCM/245px-Ashe-05-20-2018-37-41459456170-cropped.jpg"/>
  <p class="descricao">Descrição: 
    Chamar no chat caso interessse, dou aulas
    de segunda a sexta no prédio Magno!


    </p>
  </p>
  <button class="botao-chat">Chat</button>
  </div>


</div>

<div id="chatContainer">
  <div id="chatHeader">João Silva</div>
  <button id="closeChatButton">×</button>
  <div id="chatBody">
    <div id="chatBody">
      <div class="message">Oi, a bota ainda está disponível?</div>
      <div class="message">Tenho uma jaqueta para trocar!</div>
      <!-- Resto das mensagens -->
  </div>
  </div>
  <div id="chatInputArea">
      <input type="text" id="chatInput" placeholder="Digite uma mensagem...">
  </div>
</div>

<script>
  // Função para adicionar uma mensagem ao chat
  function addMessage(message) {
      var chatBody = document.getElementById('chatBody');
      var messageElement = document.createElement('div');
      messageElement.classList.add('message'); // Adiciona a classe 'message' à mensagem
      messageElement.textContent = message;
      chatBody.appendChild(messageElement);
  }

  // Função para enviar uma mensagem
  function sendMessage() {
      var input = document.getElementById('chatInput');
      var message = input.value;
      addMessage(message);
      input.value = '';
  }

  // Evento de clique no botão "Chat"
  var chatButton = document.querySelector('.botao-chat');
  chatButton.addEventListener('click', function() {
      document.getElementById('chatContainer').style.display = 'block';
  });

  // Evento de clique no botão "Fechar"
  var closeChatButton = document.getElementById('closeChatButton');
  closeChatButton.addEventListener('click', function() {
      document.getElementById('chatContainer').style.display = 'none';
  });

  // Evento de pressionar Enter no campo de texto
  var chatInput = document.getElementById('chatInput');
  chatInput.addEventListener('keydown', function(event) {
      if (event.keyCode === 13 && !event.shiftKey) {
          event.preventDefault();
          sendMessage();
      }
  });
</script>